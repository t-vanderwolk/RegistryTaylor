{"ast":null,"code":"var _jsxFileName = \"/Users/taylorvanderwolk/Desktop/code/registry-taylor/src/components/AuthDebug.js\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useState } from 'react';\nimport { useAuth } from '../context/AuthContext';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst AuthDebug = () => {\n  _s();\n  var _storage$mongo;\n  const {\n    authorized,\n    role,\n    username,\n    memberName\n  } = useAuth();\n  const [serverMe, setServerMe] = useState(null);\n  const [storage, setStorage] = useState(null);\n  const [ts, setTs] = useState(Date.now());\n  useEffect(() => {\n    let mounted = true;\n    const tick = async () => {\n      try {\n        const [meRes, storeRes] = await Promise.all([fetch('/api/me', {\n          credentials: 'include'\n        }), fetch('/api/debug/storage')]);\n        const me = await meRes.json().catch(() => ({}));\n        const st = await storeRes.json().catch(() => ({}));\n        if (!mounted) return;\n        setServerMe(me && me.user ? me.user : null);\n        setStorage(st || null);\n        setTs(Date.now());\n      } catch {}\n    };\n    tick();\n    const id = setInterval(tick, 5000);\n    return () => {\n      mounted = false;\n      clearInterval(id);\n    };\n  }, []);\n  const bg = authorized ? role === 'admin' ? '#DCFCE7' : '#DBEAFE' : '#FEF2F2';\n  const color = '#111827';\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    style: {\n      position: 'fixed',\n      bottom: 12,\n      right: 12,\n      zIndex: 50\n    },\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        background: bg,\n        color,\n        border: '1px solid #D1D5DB',\n        borderRadius: 12,\n        padding: '8px 12px',\n        fontSize: 12,\n        boxShadow: '0 2px 6px rgba(0,0,0,0.08)'\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(\"b\", {\n          children: \"Auth\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 37,\n          columnNumber: 14\n        }, this), \": \", authorized ? 'authorized' : 'unauthorized', role ? ` • ${role}` : '']\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 37,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(\"b\", {\n          children: \"User\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 38,\n          columnNumber: 14\n        }, this), \": \", username || memberName || '—']\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 38,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(\"b\", {\n          children: \"Server\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 39,\n          columnNumber: 14\n        }, this), \": \", serverMe ? `${serverMe.username || serverMe.memberName || 'session'} • ${serverMe.role}` : 'no session']\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 39,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(\"b\", {\n          children: \"Store\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 40,\n          columnNumber: 14\n        }, this), \": \", storage ? `${storage.storage}${storage.storage === 'mongo' ? ` • state=${(_storage$mongo = storage.mongo) === null || _storage$mongo === void 0 ? void 0 : _storage$mongo.state}` : ''}` : '…']\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 40,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          opacity: 0.6\n        },\n        children: [\"t=\", new Date(ts).toLocaleTimeString()]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 41,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 36,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 35,\n    columnNumber: 5\n  }, this);\n};\n_s(AuthDebug, \"1yaY81hEw07YxppVVoIuxBRuw80=\", false, function () {\n  return [useAuth];\n});\n_c = AuthDebug;\nexport default AuthDebug;\nvar _c;\n$RefreshReg$(_c, \"AuthDebug\");","map":{"version":3,"names":["React","useEffect","useState","useAuth","jsxDEV","_jsxDEV","AuthDebug","_s","_storage$mongo","authorized","role","username","memberName","serverMe","setServerMe","storage","setStorage","ts","setTs","Date","now","mounted","tick","meRes","storeRes","Promise","all","fetch","credentials","me","json","catch","st","user","id","setInterval","clearInterval","bg","color","style","position","bottom","right","zIndex","children","background","border","borderRadius","padding","fontSize","boxShadow","fileName","_jsxFileName","lineNumber","columnNumber","mongo","state","opacity","toLocaleTimeString","_c","$RefreshReg$"],"sources":["/Users/taylorvanderwolk/Desktop/code/registry-taylor/src/components/AuthDebug.js"],"sourcesContent":["import React, { useEffect, useState } from 'react';\nimport { useAuth } from '../context/AuthContext';\n\nconst AuthDebug = () => {\n  const { authorized, role, username, memberName } = useAuth();\n  const [serverMe, setServerMe] = useState(null);\n  const [storage, setStorage] = useState(null);\n  const [ts, setTs] = useState(Date.now());\n\n  useEffect(() => {\n    let mounted = true;\n    const tick = async () => {\n      try {\n        const [meRes, storeRes] = await Promise.all([\n          fetch('/api/me', { credentials: 'include' }),\n          fetch('/api/debug/storage'),\n        ]);\n        const me = await meRes.json().catch(()=>({}));\n        const st = await storeRes.json().catch(()=>({}));\n        if (!mounted) return;\n        setServerMe(me && me.user ? me.user : null);\n        setStorage(st || null);\n        setTs(Date.now());\n      } catch {}\n    };\n    tick();\n    const id = setInterval(tick, 5000);\n    return () => { mounted = false; clearInterval(id); };\n  }, []);\n\n  const bg = authorized ? (role === 'admin' ? '#DCFCE7' : '#DBEAFE') : '#FEF2F2';\n  const color = '#111827';\n\n  return (\n    <div style={{ position: 'fixed', bottom: 12, right: 12, zIndex: 50 }}>\n      <div style={{ background: bg, color, border: '1px solid #D1D5DB', borderRadius: 12, padding: '8px 12px', fontSize: 12, boxShadow: '0 2px 6px rgba(0,0,0,0.08)' }}>\n        <div><b>Auth</b>: {authorized ? 'authorized' : 'unauthorized'}{role ? ` • ${role}` : ''}</div>\n        <div><b>User</b>: {username || memberName || '—'}</div>\n        <div><b>Server</b>: {serverMe ? `${serverMe.username || serverMe.memberName || 'session'} • ${serverMe.role}` : 'no session'}</div>\n        <div><b>Store</b>: {storage ? `${storage.storage}${storage.storage==='mongo' ? ` • state=${storage.mongo?.state}` : ''}` : '…'}</div>\n        <div style={{ opacity: 0.6 }}>t={new Date(ts).toLocaleTimeString()}</div>\n      </div>\n    </div>\n  );\n};\n\nexport default AuthDebug;\n\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}